<p align="center">
      <img src="profile/images/IMG_20240129_123108_545.jpg" alt = "Макет проекта" width="480">
</p>

# СКУД на основе биометрии лица человека
__"Система Контроля Управления Доступом по биометрии"__ - проект по учебной программе "Программирование контроллеров" университета ИТМО.

# Описание:
Проект представляет собой макет двери с камерой и электромагнитным замком в своей основе. Разработан для демонстрации и исследования современных технологий в области систем контроля доступа.  
Этот проект объединяет в себе аппаратную часть, включая сервопривод, сенсорные кнопки, реле, транзисторы, резисторы и соединительные провода, блоки питания и повышающий преобразователь, а также программное обеспечение, которое передает видеопоток по локальной сети, выполняет анализ биометрических данных и дает сигнал на открытие замка для предоставления доступа к помещению.

# Репозитории проекта:
## `user-registration-bot`
Это репозиторий Телеграм бота для регистрации пользователей и их биометрических данных в системе.
Ипользуемые технологии:
* Python 3.7
* Aiogram
* Pillow для сжатия изображений
* MySQL database Server + Connector python
## `stream-face-recognition`
Это репозиторий для парсинга и обработки видеопотока с камеры + отправки управляющих сигналов на микроконтроллер.
Ипользуемые технологии:
* Python 3.7
* OpenCV, Numpy, Pandas
* Face Recognition Library
* MySQL database Server + Connector python
## `ESP32-CAM-web-server`
Это репозиторий Web сервера для передачи видеопотока с `ESP32-CAM`.
Ипользуемые технологии:
* Platformio, C++
* Arduino.h
* esp32cam.h
## `ESP32-mechanism`
Это репозиторий программы для `ESP32 dev board 38pin`, которая контролирует открытие замка и управление сервоприводом положения камеры по 2 сенсорным кнопкам.
Ипользуемые технологии:
* Platformio, C++
* Arduino.h
* ESP32Servo.h

# Установка:
* Для начала скопируйте локально все репозитории с помощью `git clone <url>`
* Затем скачайте и установите __MySQL Server__ и __MySQL Workbench__
* Создайте локальную базу данных на своем ПК через MySQL Workbench
* В `config` файлах Программ пропишите данные для доступа к БД
* Запустите отдельно файл `database.py` для создания таблицы `users`
* Загрузите прошивку на `ESP32-CAM`
* Загрузите прошивку на `ESP32 dev board 38pin`
* Запустите Телеграм бот, запустив файл `bot_main.py`

# Алгоритм взаимодействия с системой:
* Для начала необходимо зарегистрироваться в системе через Телеграм бот:
  * Пройти по [ссылке](https://t.me/BPACS_registration_bot),
  * Ввести секретный Логин и Пароль организации,
  * Далее заполнить личные данные и данные биометрии,
  * После чего камера будет распознавать лицо, а пользователь сможет отслеживать статус _"В офисе" / "Покинул офис"_ через бот
* Для запуска макета двери с камерой необходимо:
  * Подключить питание,
  * Запустить python файл `face_detection_attendace.py`

# Детальные фото макета
<p align="center">
      <img src="profile/images/IMG_20240129_123108_240.jpg" alt = "Электроника" width="480">
      <img src="profile/images/IMG_20240129_123108_444.jpg" alt = "Модуль ESP32 dev board 38pin" width="480">
      <img src="profile/images/IMG_20240129_123108_449.jpg" alt = "Камера ESP32-CAM" width="480">
      <img src="profile/images/IMG_20240129_123108_199.jpg" alt = "Сенсорная кнопка" width="480">
</p>
